{"version":3,"file":"main.d20b7c0772f614ead422.hot-update.js","sources":["webpack:///./src/server/main.js"],"sourcesContent":["import express from 'express';\nimport path from 'path';\nimport cookieParser from 'cookie-parser';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport assets from './client/assets.json';\nimport config from './config.json';\nimport previews from './previews';\n\nconst app = express();\nconst port = process.env.port || 3005; // 默认端口\n\nfunction renderPreview(group, page) {\n  const preview = previews[group][page];\n  return `\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>${preview.title}</title>\n    <style>::-webkit-scrollbar{display:none;}html,body{overflow:hidden;margin:0;}</style>\n    <script src=\"//g.alicdn.com/bizcharts/io-asserts/3.1.2/react16.0.0.production.min.js\"></script>\n    <script src=\"//g.alicdn.com/bizcharts/io-asserts/3.1.2/react-dom16.0.0.production.min.js\"></script>\n    <script src=\"//cdn.bootcss.com/babel-core/5.8.38/browser.min.js\"></script>\n    <script src=\"/scripts/g6-for-react.min.js\"></script>\n  </head>\n<body>\n<div id=\"mountNode\"></div>\n<script>/*Fixing iframe window.innerHeight 0 issue in Safari*/document.body.clientHeight;</script>\n${preview.code}\n</body>\n</html>\n  `;\n}\n\nfunction renderView(conf, page) {\n  return `\n  <!DOCTYPE html>\n  <html lang=\"en\">\n    <head>\n      <title>G6-for-React</title>\n      <meta charset=\"utf-8>\n      <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8\">\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <link rel=\"stylesheet\" type=\"text/css\" href=\"${conf[page].css}\">\n      <script src=\"/dll/vendor1.js\"></script>\n      <script src=\"/dll/vendor2.js\"></script>\n      <script>\n        window.groups = ${JSON.stringify(conf.groups)};\n        window.previewCode = \"${encodeURIComponent(conf.previewCode)}\";\n      </script>\n    </head>\n    <body>\n      <div id=\"app\">\n      </div>\n      <script src=\"${conf[page].js}\"></script>\n    </body>\n  </html>\n  `;\n}\n\napp.use(express.static(path.resolve(__dirname, 'client')));\napp.use(express.static(path.resolve(__dirname, '..', 'public')));\napp.use(cookieParser());\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\napp.use(morgan());\n\napp.get('/', (req, res) => {\n  res.send(renderView(Object.assign({}, config, assets), 'home'));\n});\n\napp.get('/demo/:group/:page', (req, res) => {\n  const { group, page } = req.params;\n  res.send(renderView(Object.assign({ previewCode: renderPreview(group, page) }, config, assets), 'demo'));\n});\n\napp.listen(port, () => {\n  console.log(`The server is running at http://127.0.0.1:${port}/`);\n});"],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}